{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport SearchBar from \"../components/SearchBar\";\nimport BusCard from \"../components/BusCard\";\nimport busService from \"../services/busService\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar HomeScreen = function HomeScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    buses = _useState2[0],\n    setBuses = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    refreshing = _useState4[0],\n    setRefreshing = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    searchQuery = _useState6[0],\n    setSearchQuery = _useState6[1];\n  useEffect(function () {\n    console.log('HomeScreen: useEffect triggered');\n    loadBuses();\n  }, []);\n  var loadBuses = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      console.log('HomeScreen: loadBuses called');\n      try {\n        var data = yield busService.getLiveBuses();\n        console.log('HomeScreen: buses loaded', data);\n        setBuses(data);\n      } catch (error) {\n        console.error('Error loading buses:', error);\n      }\n    });\n    return function loadBuses() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var onRefresh = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      setRefreshing(true);\n      yield loadBuses();\n      setRefreshing(false);\n    });\n    return function onRefresh() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleSearch = function handleSearch(query) {\n    setSearchQuery(query);\n    if (query.trim() === '') {\n      loadBuses();\n    } else {\n      var filtered = buses.filter(function (bus) {\n        return bus.lineNumber.toLowerCase().includes(query.toLowerCase()) || bus.destination.toLowerCase().includes(query.toLowerCase());\n      });\n      setBuses(filtered);\n    }\n  };\n  var handleBusPress = function handleBusPress(bus) {\n    navigation.navigate('LineDetails', {\n      bus: bus\n    });\n  };\n  var renderBus = function renderBus(_ref4) {\n    var item = _ref4.item;\n    return _jsx(BusCard, {\n      bus: item,\n      onPress: handleBusPress\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(SearchBar, {\n      onSearch: handleSearch\n    }), _jsx(ScrollView, {\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: onRefresh\n      }),\n      children: _jsxs(View, {\n        style: styles.section,\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Live Buses\"\n        }), _jsx(Text, {\n          style: styles.subtitle,\n          children: \"Real-time bus locations and schedules \\u2022 Tap to view details\"\n        }), buses.length > 0 ? _jsx(FlatList, {\n          data: buses,\n          renderItem: renderBus,\n          keyExtractor: function keyExtractor(item) {\n            return item.id.toString();\n          },\n          showsVerticalScrollIndicator: false\n        }) : _jsx(View, {\n          style: styles.emptyContainer,\n          children: _jsx(Text, {\n            style: styles.emptyText,\n            children: \"Loading bus lines...\"\n          })\n        })]\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5'\n  },\n  section: {\n    marginBottom: 20\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    padding: 15,\n    paddingBottom: 5,\n    color: '#333'\n  },\n  subtitle: {\n    fontSize: 14,\n    color: '#666',\n    paddingHorizontal: 15,\n    paddingBottom: 10\n  },\n  emptyContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 50\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#666'\n  }\n});\nexport default HomeScreen;","map":{"version":3,"names":["React","useState","useEffect","View","Text","FlatList","StyleSheet","RefreshControl","ScrollView","SearchBar","BusCard","busService","jsx","_jsx","jsxs","_jsxs","HomeScreen","_ref","navigation","_useState","_useState2","_slicedToArray","buses","setBuses","_useState3","_useState4","refreshing","setRefreshing","_useState5","_useState6","searchQuery","setSearchQuery","console","log","loadBuses","_ref2","_asyncToGenerator","data","getLiveBuses","error","apply","arguments","onRefresh","_ref3","handleSearch","query","trim","filtered","filter","bus","lineNumber","toLowerCase","includes","destination","handleBusPress","navigate","renderBus","_ref4","item","onPress","style","styles","container","children","onSearch","refreshControl","section","sectionTitle","subtitle","length","renderItem","keyExtractor","id","toString","showsVerticalScrollIndicator","emptyContainer","emptyText","create","flex","backgroundColor","marginBottom","fontSize","fontWeight","padding","paddingBottom","color","paddingHorizontal","alignItems","justifyContent"],"sources":["/Users/alen/Develop/bus-schedule-app/Autotrolej/src/screens/HomeScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n\tView,\n\tText,\n\tFlatList,\n\tStyleSheet,\n\tRefreshControl,\n\tScrollView,\n} from 'react-native';\nimport SearchBar from '../components/SearchBar';\nimport BusCard from '../components/BusCard';\nimport busService from '../services/busService';\n\nconst HomeScreen = ({ navigation }) => {\n\tconst [buses, setBuses] = useState([]);\n\tconst [refreshing, setRefreshing] = useState(false);\n\tconst [searchQuery, setSearchQuery] = useState('');\n\n\tuseEffect(() => {\n\t\tconsole.log('HomeScreen: useEffect triggered');\n\t\tloadBuses();\n\t}, []);\n\n\tconst loadBuses = async () => {\n\t\tconsole.log('HomeScreen: loadBuses called');\n\t\ttry {\n\t\t\tconst data = await busService.getLiveBuses();\n\t\t\tconsole.log('HomeScreen: buses loaded', data);\n\t\t\tsetBuses(data);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error loading buses:', error);\n\t\t}\n\t};\n\n\tconst onRefresh = async () => {\n\t\tsetRefreshing(true);\n\t\tawait loadBuses();\n\t\tsetRefreshing(false);\n\t};\n\n\tconst handleSearch = (query) => {\n\t\tsetSearchQuery(query);\n\t\tif (query.trim() === '') {\n\t\t\tloadBuses();\n\t\t} else {\n\t\t\tconst filtered = buses.filter(bus =>\n\t\t\t\tbus.lineNumber.toLowerCase().includes(query.toLowerCase()) ||\n\t\t\t\tbus.destination.toLowerCase().includes(query.toLowerCase())\n\t\t\t);\n\t\t\tsetBuses(filtered);\n\t\t}\n\t};\n\n\tconst handleBusPress = (bus) => {\n\t\tnavigation.navigate('LineDetails', { bus });\n\t};\n\n\tconst renderBus = ({ item }) => (\n\t\t<BusCard bus={item} onPress={handleBusPress} />\n\t);\n\n\treturn (\n\t\t<View style={styles.container}>\n\t\t\t<SearchBar onSearch={handleSearch} />\n\n\t\t\t<ScrollView\n\t\t\t\trefreshControl={\n\t\t\t\t\t<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<View style={styles.section}>\n\t\t\t\t\t<Text style={styles.sectionTitle}>Live Buses</Text>\n\t\t\t\t\t<Text style={styles.subtitle}>\n\t\t\t\t\t\tReal-time bus locations and schedules â€¢ Tap to view details\n\t\t\t\t\t</Text>\n\t\t\t\t\t{buses.length > 0 ? (\n\t\t\t\t\t\t<FlatList\n\t\t\t\t\t\t\tdata={buses}\n\t\t\t\t\t\t\trenderItem={renderBus}\n\t\t\t\t\t\t\tkeyExtractor={(item) => item.id.toString()}\n\t\t\t\t\t\t\tshowsVerticalScrollIndicator={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<View style={styles.emptyContainer}>\n\t\t\t\t\t\t\t<Text style={styles.emptyText}>Loading bus lines...</Text>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t)}\n\t\t\t\t</View>\n\t\t\t</ScrollView>\n\t\t</View>\n\t);\n};\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tflex: 1,\n\t\tbackgroundColor: '#f5f5f5',\n\t},\n\tsection: {\n\t\tmarginBottom: 20,\n\t},\n\tsectionTitle: {\n\t\tfontSize: 18,\n\t\tfontWeight: 'bold',\n\t\tpadding: 15,\n\t\tpaddingBottom: 5,\n\t\tcolor: '#333',\n\t},\n\tsubtitle: {\n\t\tfontSize: 14,\n\t\tcolor: '#666',\n\t\tpaddingHorizontal: 15,\n\t\tpaddingBottom: 10,\n\t},\n\temptyContainer: {\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center',\n\t\tpadding: 50,\n\t},\n\temptyText: {\n\t\tfontSize: 16,\n\t\tcolor: '#666',\n\t},\n});\n\nexport default HomeScreen;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}